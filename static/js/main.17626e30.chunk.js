(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{30:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),o=n(20),s=n.n(o),i=n(10),r=(n(30),n(24)),l=n(4),u=n(2),d=n(3),m=Object(a.createContext)(),j=n(9),b=n.p+"static/media/header__logo.03b78ada.svg",_=n(0);var h=function(e){var t=e.loggedIn,n=e.userData,a=e.handleLogout,c=e.linkText,o=e.redirectPath,s=e.handleMenuClick,r=e.isOpen,l="header ".concat(t&&"header_type_mobile"),u="menu ".concat(t&&"menu_type_mobile"," ").concat(r&&"menu_opened"),d="button button_type_menu ".concat(r&&"button_type_menu_active");return Object(_.jsxs)("header",{className:l,children:[Object(_.jsx)("img",{className:"logo",src:b,alt:"Mesto"}),Object(_.jsxs)("nav",{className:u,children:[t&&Object(_.jsx)("p",{className:"menu__user-info",children:n.email}),t?Object(_.jsx)(i.b,{className:"menu__link menu__link_type_mobile",to:"sign-in",onClick:a,children:"\u0412\u044b\u0439\u0442\u0438"}):Object(_.jsx)(i.b,{className:"menu__link",to:o,children:c})]}),t&&Object(_.jsx)("button",{className:d,onClick:s})]})};var f=function(e){var t=e.handleLogin,n=e.isLoading,c=Object(a.useState)({email:"",password:""}),o=Object(u.a)(c,2),s=o[0],i=o[1];function r(e){var t=e.target,n=t.name,a=t.value;i(Object(l.a)(Object(l.a)({},s),{},Object(j.a)({},n,a)))}return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(h,{linkText:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",redirectPath:"/sign-up"}),Object(_.jsxs)("div",{className:"auth",children:[Object(_.jsx)("h1",{className:"auth__header",children:"\u0412\u0445\u043e\u0434"}),Object(_.jsxs)("form",{className:"form form_type_auth",method:"POST",name:"login",noValidate:!0,onSubmit:function(e){e.preventDefault();var n=s.email,a=s.password;t({email:n,password:a})},children:[Object(_.jsxs)("section",{className:"form__section",children:[Object(_.jsx)("input",{className:"form__item form__item_type_auth form__item_element_email ",type:"email",name:"email",id:"email",placeholder:"Email",value:s.email,onChange:r,required:!0}),Object(_.jsx)("span",{className:"login__form-item_error",id:"email-error"})]}),Object(_.jsxs)("section",{className:"form__section",children:[Object(_.jsx)("input",{className:"form__item form__item_type_auth form__item_element_password",type:"password",name:"password",id:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:s.password,onChange:r,minLength:"2",maxLength:"200",required:!0}),Object(_.jsx)("span",{className:"login__form-item_error",id:"password-error"})]}),Object(_.jsx)("button",{className:"form__submit-button form__submit-button_type_white",type:"submit",children:n?"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...":"\u0412\u043e\u0439\u0442\u0438"})]})]})]})};var p=function(e){var t=e.handleRegister,n=e.isLoading,c=Object(a.useState)({email:"",password:""}),o=Object(u.a)(c,2),s=o[0],r=o[1];function d(e){var t=e.target,n=t.name,a=t.value;r(Object(l.a)(Object(l.a)({},s),{},Object(j.a)({},n,a)))}return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(h,{linkText:"\u0412\u043e\u0439\u0442\u0438",redirectPath:"/sign-in"}),Object(_.jsxs)("div",{className:"auth",children:[Object(_.jsx)("h1",{className:"auth__header",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(_.jsxs)("form",{className:"form form_type_auth",method:"POST",name:"login",noValidate:!0,onSubmit:function(e){e.preventDefault();var n=s.email,a=s.password;t({email:n,password:a})},children:[Object(_.jsxs)("section",{className:"form__section",children:[Object(_.jsx)("input",{className:"form__item form__item_type_auth form__item_element_email ",type:"email",name:"email",id:"email",placeholder:"Email",value:s.email,onChange:d,required:!0}),Object(_.jsx)("span",{className:"login__form-item_error",id:"email-error"})]}),Object(_.jsxs)("section",{className:"form__section",children:[Object(_.jsx)("input",{className:"form__item form__item_type_auth form__item_element_password",type:"password",name:"password",id:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:s.password,onChange:d,minLength:"2",maxLength:"200",required:!0}),Object(_.jsx)("span",{className:"login__form-item_error",id:"password-error"})]}),Object(_.jsx)("button",{className:"form__submit-button form__submit-button_type_white",type:"submit",children:n?"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...":"\u0417\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(_.jsxs)("div",{className:"auth__signin",children:[Object(_.jsx)("p",{className:"auth__signin-caption",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"}),Object(_.jsx)(i.b,{to:"sign-in",className:"auth__login-link",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})]})};var O=function(e){var t=e.card,n=e.onCardClick,c=e.onCardLike,o=e.onCardDelete,s=Object(a.useContext)(m),i=t.owner._id===s._id,r=t.likes.some((function(e){return e._id===s._id})),l="button button_type_like ".concat(r?"button_type_like_active":""),u="button ".concat(i?"button_type_delete":"button_type_delete_hidden");return Object(_.jsxs)("li",{className:"card",children:[Object(_.jsx)("img",{className:"card__image",src:t.link,alt:t.name,onClick:function(){n(t)}}),Object(_.jsxs)("div",{className:"card__content",children:[Object(_.jsx)("h2",{className:"card__heading",children:t.name}),Object(_.jsxs)("div",{className:"card__like",children:[Object(_.jsx)("button",{type:"button",className:l,"aria-label":"\u041b\u0430\u0439\u043a",onClick:function(){c(t)}}),Object(_.jsx)("p",{className:"card__likes-counter",children:t.likes.length})]}),Object(_.jsx)("button",{type:"button",className:u,"aria-label":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443",onClick:function(){o(t)}})]})]})};var v=function(){var e=(new Date).getFullYear();return Object(_.jsx)("footer",{className:"footer",children:Object(_.jsxs)("p",{className:"footer__copyright",children:["\xa9 ",e," Mesto Russia"]})})};var x=function(e){var t=e.cards,n=e.onCardLike,c=e.onCardDelete,o=e.onEditProfile,s=e.onEditAvatar,i=e.onAddPlace,r=e.onCardClick,l=e.loggedIn,u=e.handleLogout,d=e.userData,j=e.isMenuOpen,b=e.onMenuClick,f=Object(a.useContext)(m);return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(h,{loggedIn:l,userData:d,handleLogout:u,isOpen:j,handleMenuClick:b}),Object(_.jsxs)("main",{className:"content",children:[Object(_.jsxs)("section",{className:"profile",children:[Object(_.jsxs)("div",{className:"profile__avatar",children:[Object(_.jsx)("img",{className:"profile__avatar-image",src:null===f||void 0===f?void 0:f.avatar,alt:null===f||void 0===f?void 0:f.name}),Object(_.jsx)("button",{type:"button",className:"button button_type_edit-avatar","aria-label":"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",onClick:s})]}),Object(_.jsxs)("div",{className:"profile__info",children:[Object(_.jsx)("h1",{className:"profile__name",children:null===f||void 0===f?void 0:f.name}),Object(_.jsx)("button",{type:"button",className:"button button_type_edit","aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",onClick:o}),Object(_.jsx)("p",{className:"profile__job",children:null===f||void 0===f?void 0:f.about})]}),Object(_.jsx)("button",{type:"button",className:"button button_type_add","aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u043e\u0442\u043e",onClick:i})]}),Object(_.jsx)("section",{className:"cards",children:Object(_.jsx)("ul",{className:"cards__list",children:t.map((function(e){return Object(_.jsx)(O,{card:e,onCardClick:r,onCardLike:n,onCardDelete:c},e._id)}))})})]}),Object(_.jsx)(v,{})]})};var g=function(e){var t=e.name,n=e.title,a=e.btnText,c=e.children,o=e.isOpen,s=e.onClose,i=e.onSubmit;return Object(_.jsx)("article",{className:"popup popup_type_".concat(t," ").concat(o?"popup_opened":""),children:Object(_.jsx)("div",{className:"popup__container",children:Object(_.jsxs)("form",{className:"form",method:"POST",name:t,noValidate:!0,onSubmit:i,children:[Object(_.jsx)("h3",{className:"form__heading",children:n}),c,Object(_.jsx)("button",{className:"form__submit-button",type:"submit",children:a}),Object(_.jsx)("button",{className:"button button_type_close",type:"reset","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:s})]})})})};var N=function(e){var t=e.isOpen,n=e.onClose,c=e.onUpdateUser,o=e.isLoading,s=Object(a.useState)({name:"",about:""}),i=Object(u.a)(s,2),r=i[0],d=i[1],b=Object(a.useContext)(m);function h(e){var t=e.target,n=t.name,a=t.value;d(Object(l.a)(Object(l.a)({},r),{},Object(j.a)({},n,a)))}return Object(a.useEffect)((function(){d(Object(l.a)(Object(l.a)({},r),{},{name:null===b||void 0===b?void 0:b.name,about:null===b||void 0===b?void 0:b.about}))}),[b,t]),Object(_.jsxs)(g,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",name:"edit-profile",btnText:o?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),c({name:r.name,about:r.about})},children:[Object(_.jsxs)("section",{className:"form__section",children:[Object(_.jsx)("input",{className:"form__item form__item_element_name",type:"text",name:"name",id:"name",placeholder:"\u0418\u043c\u044f",value:r.name||"",onChange:h,minLength:"2",maxLength:"40",required:!0}),Object(_.jsx)("span",{className:"form__item-error",id:"name-error"})]}),Object(_.jsxs)("section",{className:"form__section",children:[Object(_.jsx)("input",{className:"form__item form__item_element_job",type:"text",name:"about",id:"about",placeholder:"\u041e \u0441\u0435\u0431\u0435",value:r.about||"",onChange:h,minLength:"2",maxLength:"200",required:!0}),Object(_.jsx)("span",{className:"form__item-error",id:"about-error"})]})]})};var C=function(e){var t=e.isOpen,n=e.onClose,c=e.onUpdateAvatar,o=e.isLoading,s=Object(a.useRef)();return Object(_.jsx)(g,{title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",name:"edit-avatar",btnText:o?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),c({avatar:s.current.value})},children:Object(_.jsxs)("section",{className:"form__section",children:[Object(_.jsx)("input",{className:"form__item form__item_element_image-link",type:"url",name:"avatar",id:"avatar",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,ref:s}),Object(_.jsx)("span",{className:"form__item-error",id:"avatar-error"})]})})};var k=function(e){var t=e.isOpen,n=e.onClose,c=e.onAddPlace,o=e.isLoading,s=Object(a.useState)({name:"",link:""}),i=Object(u.a)(s,2),r=i[0],d=i[1];function m(e){var t=e.target,n=t.name,a=t.value;d(Object(l.a)(Object(l.a)({},r),{},Object(j.a)({},n,a)))}return Object(_.jsxs)(g,{title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",name:"add-card",btnText:o?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),c({name:r.name,link:r.link})},children:[Object(_.jsxs)("section",{className:"form__section",children:[Object(_.jsx)("input",{className:"form__item form__item_element_name",type:"text",name:"name",id:"image-name",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",value:r.name,onChange:m,minLength:"2",maxLength:"30",required:!0}),Object(_.jsx)("span",{className:"form__item-error",id:"image-name-error"})]}),Object(_.jsxs)("section",{className:"form__section",children:[Object(_.jsx)("input",{className:"form__item form__item_element_image-link",type:"url",name:"link",id:"image-link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",value:r.link,onChange:m,required:!0}),Object(_.jsx)("span",{className:"form__item-error",id:"image-link-error"})]})]})};var y=function(e){var t=e.isOpen,n=e.onClose,a=e.isLoading,c=e.onCardDelete,o=e.card;return Object(_.jsx)(g,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",name:"delete-card",btnText:a?"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435...":"\u0414\u0430.",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),c(o)}})};var S=function(e){var t=e.card,n=e.onClose;return Object(_.jsx)("article",{className:"popup ".concat(t?"popup_opened":""),children:Object(_.jsx)("div",{className:"popup__container",children:Object(_.jsxs)("figure",{className:"figure",children:[Object(_.jsxs)("figcaption",{className:"figure__figcaption",children:[Object(_.jsx)("img",{className:"figure__image",src:null===t||void 0===t?void 0:t.link,alt:null===t||void 0===t?void 0:t.name}),Object(_.jsx)("p",{className:"figure__caption",children:null===t||void 0===t?void 0:t.name})]}),Object(_.jsx)("button",{className:"button button_type_close",type:"reset","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:n})]})})})},L=n.p+"static/media/success__image.1b6082f8.svg",w=n.p+"static/media/error__image.df8eddf6.svg";var I=function(e){var t=e.onClose,n=e.isOpen,a=e.isSuccess,c=a?L:w,o=a?"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!":"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437.";return Object(_.jsx)("article",{className:"popup ".concat(n?"popup_opened":""),children:Object(_.jsx)("div",{className:"popup__container",children:Object(_.jsxs)("div",{className:"info",children:[Object(_.jsx)("img",{className:"info__image",src:c,alt:o}),Object(_.jsx)("p",{className:"info__caption",children:o}),Object(_.jsx)("button",{className:"button button_type_close",type:"reset","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:t})]})})})},T=n(25),P=function(e){var t=e.component,n=Object(T.a)(e,["component"]);return Object(_.jsx)(d.b,{children:function(){return n.loggedIn?Object(_.jsx)(t,Object(l.a)({},n)):Object(_.jsx)(d.a,{to:"./sign-in"})}})},D=n(22),E=n(23),A=new(function(){function e(t){var n=t.adress,a=t.token,c=t.cohortId;Object(D.a)(this,e),this._handleResponse=function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))},this._adress=n,this._token=a,this._cohortId=c}return Object(E.a)(e,[{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this._adress,"/v1/").concat(this._cohortId,"/users/me"),{headers:{authorization:this._token}}).then((function(t){return e._handleResponse(t)}))}},{key:"editUserAvatar",value:function(e){var t=this;return fetch("".concat(this._adress,"/v1/").concat(this._cohortId,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({avatar:e.avatar})}).then((function(e){return t._handleResponse(e)}))}},{key:"editUserInfo",value:function(e){var t=this;return fetch("".concat(this._adress,"/v1/").concat(this._cohortId,"/users/me"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return t._handleResponse(e)}))}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this._adress,"/v1/").concat(this._cohortId,"/cards"),{headers:{authorization:this._token}}).then((function(t){return e._handleResponse(t)}))}},{key:"addCard",value:function(e){var t=this;return fetch("".concat(this._adress,"/v1/").concat(this._cohortId,"/cards"),{method:"POST",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return t._handleResponse(e)}))}},{key:"changeLikeCardStatus",value:function(e,t){var n=this;return t?fetch("".concat(this._adress,"/v1/").concat(this._cohortId,"/cards/likes/").concat(e),{method:"PUT",headers:{authorization:this._token}}).then((function(e){return n._handleResponse(e)})):fetch("".concat(this._adress,"/v1/").concat(this._cohortId,"/cards/likes/").concat(e),{method:"DELETE",headers:{authorization:this._token}}).then((function(e){return n._handleResponse(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._adress,"/v1/").concat(this._cohortId,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this._token}}).then((function(e){return t._handleResponse(e)}))}}]),e}())({adress:"https://mesto.nomoreparties.co",token:"12e16369-63c3-45db-b812-aa3f60268f30",cohortId:"cohort-22"}),R="https://auth.nomoreparties.co",U=function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))};var q=function(){var e=Object(a.useState)(),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)([]),s=Object(u.a)(o,2),i=s[0],j=s[1],b=Object(a.useState)(!1),h=Object(u.a)(b,2),O=h[0],v=h[1],g=Object(a.useState)(!1),L=Object(u.a)(g,2),w=L[0],T=L[1],D=Object(a.useState)(!1),E=Object(u.a)(D,2),q=E[0],z=E[1],M=Object(a.useState)(!1),F=Object(u.a)(M,2),J=F[0],B=F[1],V=Object(a.useState)(null),H=Object(u.a)(V,2),Y=H[0],G=H[1],K=Object(a.useState)(null),Q=Object(u.a)(K,2),W=Q[0],X=Q[1],Z=Object(a.useState)(!1),$=Object(u.a)(Z,2),ee=$[0],te=$[1],ne=Object(a.useState)(!1),ae=Object(u.a)(ne,2),ce=ae[0],oe=ae[1],se=Object(a.useState)({email:"",_id:""}),ie=Object(u.a)(se,2),re=ie[0],le=ie[1],ue=Object(a.useState)(!1),de=Object(u.a)(ue,2),me=de[0],je=de[1],be=Object(a.useState)(!1),_e=Object(u.a)(be,2),he=_e[0],fe=_e[1],pe=Object(a.useState)(!1),Oe=Object(u.a)(pe,2),ve=Oe[0],xe=Oe[1],ge=Object(d.g)();Object(a.useEffect)((function(){!function(){var e=localStorage.getItem("jwt");e&&(t=e,fetch("".concat(R,"/users/me"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return U(e)}))).then((function(e){var t=e.data,n=t.email,a=t._id;le({email:n,_id:a}),je(!0),ge.push("/")})).catch((function(e){return console.log(e)}));var t}(),A.getUserInfo().then((function(e){c(e)})).catch((function(e){return console.log(e)})),A.getInitialCards().then((function(e){j(e)})).catch((function(e){return console.log(e)}))}),[]);var Ne=function(){fe(!1),Ce()};function Ce(){xe(!0)}function ke(){z(!1),v(!1),T(!1),B(!1),G(null),X(null)}return Object(_.jsx)("div",{className:"page__container",children:Object(_.jsxs)(m.Provider,{value:n,children:[Object(_.jsxs)(d.d,{children:[Object(_.jsx)(P,{exact:!0,path:"/",loggedIn:me,component:x,cards:i,onCardLike:function(e){var t=e.likes.some((function(e){return e._id===n._id}));A.changeLikeCardStatus(e._id,!t).then((function(t){j((function(n){return n.map((function(n){return n._id===e._id?t:n}))}))})).catch((function(e){return console.log(e)}))},onCardDelete:function(e){B(!0),G(e)},onEditProfile:function(){v(!0)},onEditAvatar:function(){z(!0)},onAddPlace:function(){T(!0)},onCardClick:function(e){X(e)},handleLogout:function(){je(!1),localStorage.removeItem("jwt"),le({email:"",_id:""})},userData:re,isMenuOpen:ce,onMenuClick:function(){oe(!ce)}}),Object(_.jsx)(d.b,{path:"/sign-up",children:Object(_.jsx)(p,{handleRegister:function(e){var t=e.email,n=e.password;te(!0),function(e,t){return fetch("".concat(R,"/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e,email:t})}).then((function(e){return U(e)}))}(n,t).then((function(e){var t=e.data,n=t.email,a=t._id;le({email:n,_id:a}),fe(!0),Ce()})).catch(Ne).finally((function(){te(!1)}))},isLoading:ee})}),Object(_.jsx)(d.b,{path:"/sign-in",children:Object(_.jsx)(f,{handleLogin:function(e){var t=e.email,n=e.password;te(!0),function(e,t){return fetch("".concat(R,"/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e,email:t})}).then((function(e){return U(e)}))}(n,t).then((function(e){var n=e.token;localStorage.setItem("jwt",n),le(Object(l.a)(Object(l.a)({},re),{},{email:t})),je(!0),ge.push("/")})).catch(Ne).finally((function(){te(!1)}))},isLoading:ee})}),Object(_.jsx)(d.b,{exact:!0,path:"/",children:me?Object(_.jsx)(d.a,{to:"/"}):Object(_.jsx)(d.a,{to:"/sign-in"})})]}),Object(_.jsx)(N,{isOpen:O,onClose:ke,onUpdateUser:function(e){te(!0),A.editUserInfo(e).then((function(e){c(e),ke()})).catch((function(e){return console.log(e)})).finally((function(){te(!1)}))},isLoading:ee}),Object(_.jsx)(C,{isOpen:q,onClose:ke,onUpdateAvatar:function(e){te(!0),A.editUserAvatar(e).then((function(e){c(e),ke()})).catch((function(e){return console.log(e)})).finally((function(){te(!1)}))},isLoading:ee}),Object(_.jsx)(k,{isOpen:w,onClose:ke,onAddPlace:function(e){te(!0),A.addCard(e).then((function(e){j([e].concat(Object(r.a)(i))),ke()})).catch((function(e){return console.log(e)})).finally((function(){te(!1)}))},isLoading:ee}),Object(_.jsx)(y,{isOpen:J,onClose:ke,onCardDelete:function(e){te(!0),A.deleteCard(e._id).then((function(){j((function(t){return t.filter((function(t){return t._id!==e._id}))})),ke()})).catch((function(e){return console.log(e)})).finally((function(){te(!1)}))},isLoading:ee,card:Y}),Object(_.jsx)(S,{card:W,onClose:ke}),Object(_.jsx)(I,{isSuccess:he,isOpen:ve,onClose:function(){xe(!1),he&&ge.push("/sign-in")}})]})})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,38)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),o(e),s(e)}))};s.a.render(Object(_.jsx)(c.a.StrictMode,{children:Object(_.jsx)(i.a,{children:Object(_.jsx)(q,{})})}),document.getElementById("root")),z()}},[[37,1,2]]]);
//# sourceMappingURL=main.17626e30.chunk.js.map